local arrestAuraEnabled = false
local arrestConn
local arrestRange = 0.50

WeaponsTab:Toggle({
    Title = "Arrest Aura",
    Description = "Auto-arrest nearby players",
    Default = false,
    Callback = function(state)
        arrestAuraEnabled = state

        if state then
            arrestConn = RunService.Heartbeat:Connect(function()
                local myChar = player.Character
                if not myChar then return end
                local myRoot = myChar:FindFirstChild("HumanoidRootPart")
                if not myRoot then return end

                for _, plr in Players:GetPlayers() do
                    if plr == player then continue end
                    local char = plr.Character
                    if not char then continue end
                    local root = char:FindFirstChild("HumanoidRootPart")
                    local hum = char:FindFirstChild("Humanoid")
                    if not root or not hum or hum.Health <= 0 then continue end
                    if (myRoot.Position - root.Position).Magnitude <= arrestRange then
                        task.spawn(function()
                            pcall(ReplicatedStorage.Remotes.ArrestPlayer.InvokeServer, ReplicatedStorage.Remotes.ArrestPlayer, plr)
                        end)
                    end
                end
            end)
        else
            if arrestConn then
                arrestConn:Disconnect()
                arrestConn = nil
            end
        end
    end
})

WeaponsTab:Slider({
    Title = "Arrest Range",
    Description = "Adjust arrest aura radius",
    Value = {
        Min = 0.5,
        Max = 10,
        Default = 10
    },
    Step = 0.5,
    Callback = function(val)
        arrestRange = val
    end
})
